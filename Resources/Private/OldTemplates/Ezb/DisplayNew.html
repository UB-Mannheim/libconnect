{namespace libconnect=Sub\Libconnect\ViewHelpers}
<h1 class="ezb">
    <f:translate key="LLL:EXT:libconnect/Resources/Private/Language/locallang.xml:tx_libconnect.ezb.new.headline.alphabetical" />
</h1>

<f:if condition="{subject}">
    <h2 class="ezb">{subject}</h2>
</f:if>

<f:if condition="{journals.subject}">
    <h2>
        <f:format.htmlentitiesDecode>{journals.subject}</f:format.htmlentitiesDecode>
    </h2>
</f:if>

<div class="ezb-list-legend">
    <f:form enctype="multipart/form-data" controller="Ezb" method="post" pageUid="{pageUid}" name="ezbaccessinfoform" id="ezbaccessinfoform" additionalAttributes="{onChange : 'document.ezbaccessinfoform.submit();'}">
    
        <f:for each="{journals.selected_colors}" as="section" key="key">
            <f:if condition="{section.colorkey} != 6">

                <f:if condition="{libconnect:array(inputArray: colors, key: section.colorkey)}">
                    <f:then>
                        <f:form.checkbox  id="ezb-accessinfo-access_{section.colorkey}" name="libconnect[search][colors][{section.colorkey}]" class="accessinfo-element"  value="{section.colorkey}"  checked="1"/>
                    </f:then>
                    <f:else>
                        <f:form.checkbox  id="ezb-accessinfo-access_{section.colorkey}" name="libconnect[search][colors][{section.colorkey}]" class="accessinfo-element"  value="{section.colorkey}"/>
                    </f:else>
                </f:if>
                
            </f:if>
            <label class="ezb-accessinfo-access_{section.colorkey} accessinfo-element" for="ezb-accessinfo-access_{section.colorkey}">{section.value}</label>

        </f:for>
        
        <f:if condition="{formParameter.subject}">
            <f:form.hidden name="libconnect[subject]" value="{formParameter.subject}" />
        </f:if>
        <f:if condition="{formParameter.search.Notations}">
            <f:for each="{formParameter.search.Notations}" as="value" key="key">
                <f:form.hidden name="libconnect[search][Notations][{key}]" value="{value}" />
            </f:for>
        </f:if>
        <f:if condition="{formParameter.search}">
            <f:form.hidden name="libconnect[search][jq_type1]" value="{formParameter.search.jq_type1}" />
            <f:form.hidden name="libconnect[search][jq_term1]" value="{formParameter.search.jq_term1}" />
            <f:form.hidden name="libconnect[search][sc]" value="{formParameter.search.sc}" />
        </f:if>
    </f:form>
</div>

<br/><br/>

<p>
    <f:translate key="LLL:EXT:libconnect/Resources/Private/Language/locallang.xml:tx_libconnect.ezb.new.since" />
    <span class="ezb-newdate">{new_date}</span> {journals.page_vars.search_count}
    <f:translate key="LLL:EXT:libconnect/Resources/Private/Language/locallang.xml:tx_libconnect.ezb.new.hits" />
</p>

<br/>

<div class="ezb-navigation">
    <f:for each="{journals.navlist.pages}" as="item">
        <f:if condition="{libconnect:IsArray(value: item)}">
            <f:then>
                <a href="<f:format.htmlentitiesDecode>{item.link}</f:format.htmlentitiesDecode>">
                    <f:format.htmlentitiesDecode>{item.title}</f:format.htmlentitiesDecode>
                </a>
            </f:then>
            <f:else>
                <em>
                    <f:format.htmlentitiesDecode>{item}</f:format.htmlentitiesDecode>
                </em>
            </f:else>
        </f:if>
    </f:for>
</div>

<br/>

<f:flashMessages />

<div class="ezb-list-output">
    <f:for each="{journals.alphabetical_order.first_fifty}" as="section">
        <h3>
            <a href="{section.link}">
                <libconnect:strreplace search=" & " replace=" &amp; ">
                    <f:format.htmlentitiesDecode>{section.first_fifty_titles}</f:format.htmlentitiesDecode>
                </libconnect:strreplace>...
            </a>
        </h3>
    </f:for>
    
    <f:if condition="{journals.alphabetical_order.current_title}">
        <h2><f:format.htmlentitiesDecode>{journals.alphabetical_order.current_title}</f:format.htmlentitiesDecode>...</h2>
    </f:if>

    <ul class="ezb-list">
        <f:for each="{journals.alphabetical_order.journals}" as="journal">
            <li class="ezb-list-accessinfo-access_{journal.color_code}">
                <a href="<f:format.htmlentitiesDecode>{journal.detail_link}</f:format.htmlentitiesDecode>">
                    <libconnect:strreplace search=" & " replace=" &amp; ">
                        <f:format.htmlentitiesDecode>{journal.title}</f:format.htmlentitiesDecode>
                    </libconnect:strreplace>
                </a>
            </li>
        </f:for>
    </ul>

    <f:for each="{journals.alphabetical_order.next_fifty}" as="section">
        <h3>
            <a href="<f:format.htmlentitiesDecode>{section.link}</f:format.htmlentitiesDecode>">
                <libconnect:strreplace search=" & " replace=" &amp; ">
                    <f:format.htmlentitiesDecode>{section.next_fifty_titles}</f:format.htmlentitiesDecode>
                </libconnect:strreplace>...
            </a>
        </h3>
    </f:for>
</div>
